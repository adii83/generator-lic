<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- Favicon (browser) -->
    <link rel="icon" type="image/png" href="/assets/logo/favicon.png" />

    <!-- Apple Touch Icon (iOS Home Screen) -->
    <link rel="apple-touch-icon" href="/assets/logo/apple-icon.png" />

    <!-- PWA-ish (optional tapi bagus) -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="GameHub Admin" />

    <title>GameHub Admin</title>

    <!-- Tailwind CDN (no build) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* premium look */
      body {
        background: radial-gradient(
            1200px 600px at 20% 0%,
            rgba(124, 77, 255, 0.25),
            transparent 60%
          ),
          radial-gradient(
            900px 500px at 90% 10%,
            rgba(34, 197, 94, 0.12),
            transparent 55%
          ),
          #070b12;
      }
      .glass {
        background: rgba(17, 24, 39, 0.62);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .stroke {
        border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .navBtn {
        padding: 6px 12px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.06);
        font-size: 13px;
        transition: background 0.2s ease, color 0.2s ease;
      }
      .navBtn:hover {
        background: rgba(255, 255, 255, 0.12);
      }
      .navBtn.active {
        background: rgba(124, 77, 255, 0.25);
        color: #c4b5fd;
        font-weight: 600;
      }
      .btn-amber,
      .btn-red {
        padding: 0.5rem 0.75rem;
        border-radius: 12px;
        font-size: 0.85rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
      }
      .btn-amber {
        background: #d97706;
        color: #fff;
      }
      .btn-amber:hover {
        background: #f59e0b;
      }
      .btn-red {
        background: #dc2626;
        color: #fff;
      }
      .btn-red:hover {
        background: #ef4444;
      }
      .btn-glass {
        padding: 0.5rem 0.75rem;
        border-radius: 12px;
        font-size: 0.85rem;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.08);
        color: #e5e7eb;
        transition: background 0.2s ease;
      }
      .btn-glass:hover {
        background: rgba(255, 255, 255, 0.18);
      }
      .statCard {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 14px;
        padding: 16px;
      }
      .statCard .label {
        font-size: 12px;
        color: #9ca3af;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .statCard .value {
        font-size: 22px;
        font-weight: 800;
      }
    </style>
  </head>
  <body class="text-gray-100">
    <header class="sticky top-0 z-50 bg-black/70 backdrop-blur border-b border-white/10">
    <div class="max-w-7xl mx-auto h-14 px-4 flex items-center justify-between">

        <!-- Logoo -->
        <div class="flex items-center gap-2 min-w-0">
        <img
            src="/assets/logo/logo.png"
            alt="GameHub"
            class="w-9 h-9 rounded-full object-cover border border-white/10"
        />
        <span class="font-semibold truncate hidden sm:block">
            GameHub Admin
        </span>
        </div>

        <!-- Navigation -->
        <nav class="flex gap-1 sm:gap-2 text-sm">
        <button data-page="dashboard" class="navBtn active">Dashboard</button>
        <button data-page="generate" class="navBtn">Generate</button>
        <button data-page="licenses" class="navBtn">Licenses</button>
        <button data-page="logs" class="navBtn">Logs</button>
        </nav>

    </div>
    </header>


    <main class="pb-16">
      <!-- Dashboard Page -->
      <section
        id="page-dashboard"
        class="pageSection max-w-7xl mx-auto px-4 py-6 space-y-6"
      >
        <div>
          <h1 class="text-xl font-extrabold">Dashboard</h1>
          <p class="text-sm text-gray-400">
            Ringkasan sistem & status lisensi GameHub
          </p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="statCard">
            <div class="label">Active Users</div>
            <div class="value" id="statActive">—</div>
          </div>
          <div class="statCard">
            <div class="label">Unused Licenses</div>
            <div class="value" id="statUnused">—</div>
          </div>
          <div class="statCard">
            <div class="label">Banned</div>
            <div class="value text-red-400" id="statBanned">—</div>
          </div>
          <div class="statCard">
            <div class="label">Total Licenses</div>
            <div class="value" id="statTotal">—</div>
          </div>
        </div>

        <div class="glass rounded-xl p-4 space-y-3">
          <h2 class="font-semibold">Admin Access</h2>
          <div class="flex flex-col sm:flex-row gap-2">
            <input
              id="adminToken"
              type="password"
              placeholder="ADMIN_TOKEN"
              class="flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 outline-none focus:ring-2 focus:ring-violet-500"
            />
            <button
              id="btnUnlock"
              class="px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 font-semibold"
            >
              Unlock
            </button>
            <button
              id="btnLock"
              class="px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 font-semibold"
            >
              Lock
            </button>
          </div>
          <p id="authMsg" class="text-xs text-gray-400">
            Token disimpan lokal di browser iPhone kamu.
          </p>
        </div>

        <div class="glass rounded-xl p-4 space-y-3">
          <h2 class="font-semibold">System Actions</h2>
          <div class="flex flex-col sm:flex-row sm:items-center gap-2">
            <button
              id="btnPing"
              class="px-4 py-2 rounded-lg bg-violet-600 hover:bg-violet-500 font-semibold w-full sm:w-auto"
            >
              Test API Connection
            </button>
            <span id="sysMsg" class="text-xs text-gray-400"
              >Cek status API & Supabase dari sini.</span
            >
          </div>
        </div>
      </section>

      <!-- Generate Page -->
      <section
        id="page-generate"
        class="pageSection hidden max-w-7xl mx-auto px-4 py-6 space-y-6"
      >
        <div>
          <h1 class="text-xl font-extrabold">Generate</h1>
          <p class="text-sm text-gray-400">
            Generate & insert langsung ke Supabase.
          </p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="glass rounded-2xl p-5">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-lg font-extrabold">Generate License</div>
                <div class="text-sm text-gray-400">
                  Generate & insert langsung ke Supabase.
                </div>
              </div>
              <div id="genBusy" class="hidden text-xs text-gray-300">
                Loading…
              </div>
            </div>

            <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="md:col-span-1">
                <label class="text-xs text-gray-400">Plan</label>
                <select
                  id="genPlan"
                  class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
                >
                  <option value="premium">premium</option>
                  <option value="standard">standard</option>
                </select>
              </div>
              <div class="md:col-span-1">
                <label class="text-xs text-gray-400">Jumlah</label>
                <input
                  id="genAmount"
                  type="number"
                  min="1"
                  value="1"
                  class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
                />
              </div>
              <div class="md:col-span-3">
                <label class="text-xs text-gray-400">Notes</label>
                <input
                  id="genNotes"
                  type="text"
                  placeholder="Contoh: Budi - Order Shopee #129283713"
                  class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
                />
              </div>
            </div>

            <button
              id="btnGenerate"
              class="mt-4 w-full px-4 py-3 rounded-xl bg-violet-600 hover:bg-violet-500 font-semibold"
            >
              Generate & Insert
            </button>
          </div>

          <div class="glass rounded-2xl p-5">
            <div class="flex items-center justify-between">
              <div>
                <div class="text-lg font-extrabold">Output</div>
                <div class="text-sm text-gray-400">
                  Tap untuk copy. Export TXT/CSV.
                </div>
              </div>
              <div class="flex gap-2">
                <button
                  id="btnExportTxt"
                  class="px-3 py-2 rounded-xl glass hover:bg-white/10 text-sm"
                >
                  Export TXT
                </button>
                <button
                  id="btnExportCsv"
                  class="px-3 py-2 rounded-xl glass hover:bg-white/10 text-sm"
                >
                  Export CSV
                </button>
                <button
                  id="btnClearOut"
                  class="px-3 py-2 rounded-xl glass hover:bg-white/10 text-sm"
                >
                  Clear
                </button>
              </div>
            </div>

            <div
              id="genOutput"
              class="mt-4 space-y-2 max-h-[360px] overflow-auto pr-1"
            ></div>
          </div>
        </div>

        <div class="glass rounded-2xl p-5">
          <div>
            <div class="text-lg font-extrabold">Quick Action</div>
            <div class="text-sm text-gray-400">
              Reset device / ban license cepat.
            </div>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-3">
            <div class="md:col-span-2">
              <label class="text-xs text-gray-400">License Key</label>
              <input
                id="quickKey"
                type="text"
                placeholder="GHUB-XXXX-XXXX-XXXX"
                class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
              />
            </div>
            <div class="md:col-span-1 flex items-end gap-2">
              <button
                id="btnQuickReset"
                class="w-full px-4 py-3 rounded-xl bg-amber-600 hover:bg-amber-500 font-semibold"
              >
                Reset
              </button>
              <button
                id="btnQuickBan"
                class="w-full px-4 py-3 rounded-xl bg-red-600 hover:bg-red-500 font-semibold"
              >
                Ban
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Licenses Page -->
      <section
        id="page-licenses"
        class="pageSection hidden max-w-7xl mx-auto px-4 py-6 space-y-6"
      >
        <div
          class="flex flex-col md:flex-row md:items-center md:justify-between gap-3"
        >
          <div>
            <h1 class="text-xl font-extrabold">Manage Licenses</h1>
            <p class="text-sm text-gray-400">
              Monitor, reset, ban, dan hapus lisensi
            </p>
          </div>

          <div class="flex flex-col sm:flex-row gap-2 w-full md:w-auto">
            <input
              id="licSearch"
              type="text"
              placeholder="Search license / notes"
              class="flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-sm outline-none focus:ring-2 focus:ring-violet-500"
            />
            <button
              id="btnReload"
              class="px-4 py-2 rounded-lg bg-violet-600 hover:bg-violet-500 font-semibold text-sm"
            >
              Refresh
            </button>
          </div>
        </div>

        <div id="licMsg" class="text-sm text-gray-400"></div>

        <div
          id="licenseCards"
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"
        ></div>

        <hr class="my-8 border-white/10" />

        <div class="overflow-auto rounded-xl border border-white/10">
          <table class="w-full text-sm">
            <thead class="bg-white/5 text-gray-300">
              <tr>
                <th class="px-4 py-3 text-left">License</th>
                <th class="px-4 py-3 text-left">Plan</th>
                <th class="px-4 py-3 text-left">Status</th>
                <th class="px-4 py-3 text-left">Notes</th>
                <th class="px-4 py-3 text-left">Device</th>
                <th class="px-4 py-3 text-left">Activated</th>
                <th class="px-4 py-3 text-left">Actions</th>
              </tr>
            </thead>
            <tbody id="licenseTable" class="text-gray-100"></tbody>
          </table>
        </div>
      </section>

      <!-- Logs Page -->
      <section
        id="page-logs"
        class="pageSection hidden max-w-7xl mx-auto px-4 py-6 space-y-6"
      >
        <div class="glass rounded-2xl p-5 space-y-4">
          <div
            class="flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between"
          >
            <div>
              <div class="text-lg font-extrabold">Activity Logs</div>
              <div class="text-sm text-gray-400">
                Filter + pagination. Ban langsung dari log.
              </div>
            </div>
            <div class="flex gap-2">
              <button
                id="btnClearLogs"
                class="btn-red text-sm px-4 py-2 rounded-xl"
              >
                Clear All Logs
              </button>
              <button
                id="btnLogsSearch"
                class="px-4 py-2 rounded-xl bg-violet-600 hover:bg-violet-500 font-semibold"
              >
                Search / Filter
              </button>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
            <div class="md:col-span-2">
              <label class="text-xs text-gray-400">Search</label>
              <input
                id="logsSearch"
                type="text"
                placeholder="license_key / device_id / reason..."
                class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
              />
            </div>
            <div>
              <label class="text-xs text-gray-400">Action</label>
              <select
                id="logsAction"
                class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
              >
                <option>All</option>
                <option value="activate_success">activate_success</option>
                <option value="activate_failed">activate_failed</option>
              </select>
            </div>
            <div>
              <label class="text-xs text-gray-400">Reason</label>
              <select
                id="logsReason"
                class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
              >
                <option>All</option>
                <option value="banned">banned</option>
                <option value="wrong_device">wrong_device</option>
                <option value="license_not_found">license_not_found</option>
                <option value="other">other</option>
              </select>
            </div>
            <div class="md:col-span-2">
              <label class="text-xs text-gray-400">Result</label>
              <select
                id="logsResult"
                class="w-full mt-1 px-3 py-2 rounded-xl bg-black/30 stroke outline-none focus:ring-2 focus:ring-violet-500"
              >
                <option>All</option>
                <option>Success</option>
                <option>Failed</option>
                <option>Banned</option>
              </select>
            </div>
            <div class="md:col-span-2">
              <label class="text-xs text-gray-400">Pagination</label>
              <div class="mt-1 flex gap-2">
                <button
                  id="btnLogsPrev"
                  class="w-full px-4 py-2 rounded-xl glass hover:bg-white/10"
                >
                  Previous
                </button>
                <button
                  id="btnLogsNext"
                  class="w-full px-4 py-2 rounded-xl glass hover:bg-white/10"
                >
                  Next
                </button>
              </div>
              <div id="logsPageInfo" class="mt-2 text-xs text-gray-400"></div>
            </div>
          </div>

          <div id="logsMsg" class="text-sm text-gray-400"></div>
        </div>

        <div class="overflow-auto rounded-xl border border-white/10">
          <table class="w-full text-sm">
            <thead class="text-gray-300 bg-white/5">
              <tr>
                <th class="text-left px-4 py-3">ID</th>
                <th class="text-left px-4 py-3">License</th>
                <th class="text-left px-4 py-3">Device</th>
                <th class="text-left px-4 py-3">Action</th>
                <th class="text-left px-4 py-3">Reason</th>
                <th class="text-left px-4 py-3">Time</th>
                <th class="text-left px-4 py-3">Actions</th>
              </tr>
            </thead>
            <tbody id="logsTable" class="text-gray-100"></tbody>
          </table>
        </div>
      </section>

      <div
        id="toast"
        class="fixed bottom-4 left-1/2 -translate-x-1/2 hidden px-4 py-3 rounded-xl glass text-sm"
      ></div>
    </main>

    <script src="./assets/app.js"></script>
  </body>
</html>
